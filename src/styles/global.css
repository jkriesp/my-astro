@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --accent-primary: #8475b5; /* lavender-500 */
    --accent-secondary: #6b8a6b; /* sage-500 */
    --accent-tertiary: #70a8cc; /* powder-500 */
    --background: #fafafa;
    --background-secondary: #ffffff;
    --background-tertiary: #f7f9f7; /* sage-50 */
    --text: #4a5568; /* soft charcoal */
    --text-header: #2d3748; /* darker gray */
    --text-muted: #718096; /* muted gray */
    --border: #e8ede8; /* sage-100 */
    --gradient-start: #efecf7; /* lavender-100 */
    --gradient-end: #ecf2f7; /* powder-100 */
    --code-bg: #f8f7fb; /* lavender-50 */
    --code-text: #6b8a6b; /* sage-500 */
    --box-shadow: rgba(141, 169, 196, 0.08); /* powder blue shadow */
  }

  [data-theme="dark"] {
    --accent-primary: #c4b5fd; /* vibrant lavender */
    --accent-secondary: #86efac; /* bright sage green */
    --accent-tertiary: #7dd3fc; /* bright sky blue */
    --background: #0f172a; /* deep slate - modern and neutral */
    --background-secondary: #1e293b; /* slate-800 */
    --background-tertiary: #334155; /* slate-700 */
    --text: #e2e8f0; /* crisp light gray - excellent readability */
    --text-header: #f8fafc; /* almost white for headers */
    --text-muted: #94a3b8; /* muted slate gray */
    --border: #334155; /* slate-700 for subtle borders */
    --gradient-start: #312e81; /* deep indigo */
    --gradient-end: #1e3a8a; /* deep blue */
    --code-bg: #1e293b; /* slate-800 for code blocks */
    --code-text: #86efac; /* bright sage for code */
    --box-shadow: rgba(196, 181, 253, 0.15); /* soft lavender glow */
  }
}

@layer components {
  .prose {
    @apply max-w-[65ch] mx-auto text-lg leading-7;
  }

  .tag {
    @apply inline-block px-3 py-1 rounded-full text-sm;
    @apply bg-lavender-100 text-lavender-700 hover:bg-lavender-200;
    @apply transform transition-all duration-300 hover:-translate-y-0.5;
    [data-theme="dark"] & {
      @apply bg-lavender-800 text-lavender-200 hover:bg-lavender-700;
    }
  }

  /* Animation keyframes for refined micro-interactions */

  @keyframes slideInUnderline {
    from {
      width: 0;
    }
    to {
      width: 100%;
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes softFadeIn {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Button animation class - refined */
  .btn-animate {
    @apply relative overflow-hidden transition-all duration-300;
  }

  .btn-animate:hover {
    @apply transform -translate-y-0.5;
  }

  .btn-animate:active {
    @apply transform translate-y-0;
  }

  /* Geometric pattern utilities */
  .geometric-hero-bg {
    position: relative;
    background:
      radial-gradient(circle at 20% 30%, var(--gradient-start) 0%, transparent 50%),
      radial-gradient(circle at 80% 70%, var(--gradient-end) 0%, transparent 50%),
      var(--background);
  }

  .gentle-lift {
    transition: transform 0.4s ease, box-shadow 0.4s ease;
  }

  .gentle-lift:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px var(--box-shadow);
  }

  .elevation-1 {
    box-shadow:
      0 1px 3px var(--box-shadow),
      0 0 0 1px var(--border);
  }

  .elevation-2 {
    box-shadow:
      0 4px 12px var(--box-shadow),
      0 0 0 1px var(--border);
  }
}

/* Keep existing font faces */
@font-face {
  font-family: "Atkinson";
  src: url("/fonts/atkinson-regular.woff") format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Atkinson";
  src: url("/fonts/atkinson-bold.woff") format("woff");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* Base styles */
body {
  font-family: "Atkinson", sans-serif;
  font-size: 1.0625rem; /* 17px - slightly larger for muted colors */
  line-height: 1.7;
  letter-spacing: 0.01em;
  @apply m-0 p-0 text-left text-gray-600 dark:text-gray-300;
  background-color: var(--background);
}

main {
  @apply w-[720px] max-w-[calc(100%-2em)] mx-auto py-12 px-4 relative;
}

main::before {
  content: "";
  @apply absolute top-0 left-1/2 -translate-x-1/2 w-screen h-[600px];
  background: linear-gradient(var(--gradient-start), var(--background));
  z-index: -1;
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  @apply text-gray-800 dark:text-gray-50;
  line-height: 1.2;
  letter-spacing: -0.02em;
  /* Refined margins for all headings */
  margin-top: 1.5em;
  margin-bottom: 0.7em;
}

h1 {
  font-size: 2.75rem;
  letter-spacing: -0.02em;
  line-height: 1.1;
  animation: fadeIn 0.6s ease-out;
}
h2 {
  font-size: 2.2rem;
  letter-spacing: -0.015em;
  line-height: 1.2;
}
h3 {
  font-size: 1.75rem;
  letter-spacing: -0.01em;
  line-height: 1.3;
}
h4 {
  font-size: 1.5rem;
}
h5 {
  font-size: 1.25rem;
}

strong,
b {
  @apply font-bold text-gray-800 dark:text-gray-100;
}

a {
  color: var(--accent-primary);
  @apply relative;
  font-weight: 500;
  transition: all 0.4s ease-in-out;
}

a:hover {
  opacity: 0.8;
}

/* Refined link underline effect */
a:not(.tag):not(.btn-animate) {
  @apply relative;
}

a:not(.tag):not(.btn-animate)::after {
  content: "";
  @apply absolute bottom-0 left-0 h-0.5;
  background-color: var(--accent-primary);
  width: 0;
  transition: width 0.4s ease;
}

a:not(.tag):not(.btn-animate):hover::after {
  width: 100%;
}

code {
  @apply px-1 rounded;
  background-color: var(--code-bg);
  color: var(--code-text);
}

pre {
  @apply p-4 rounded-lg;
  background-color: var(--code-bg);
}

pre code {
  @apply p-0;
  color: var(--code-text);
}

/* Utilities */
.sr-only {
  @apply border-0 p-0 m-0 absolute h-px w-px overflow-hidden;
  clip: rect(1px 1px 1px 1px);
  clip: rect(1px, 1px, 1px, 1px);
  clip-path: inset(50%);
  white-space: nowrap;
}

/* Blog post specific heading styles */
.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
  /* More compact margins for blog post headings */
  margin-top: 1.2em;
  margin-bottom: 0.5em;
}

/* First heading in a blog post should have less top margin */
.prose > h1:first-child,
.prose > h2:first-child,
.prose > h3:first-child,
.prose > h4:first-child {
  margin-top: 0.7em;
}

/* Animation for page elements */
@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Only apply animations to blog post sections, not about page */
.blog-post section {
  animation: slideUp 0.3s ease-out forwards;
}

.blog-post section:nth-child(2) {
  animation-delay: 0.1s;
}

/* Button styles with refined hover effects */
button:not(#themeToggle) {
  @apply transition-all duration-300 transform;
}

button:not(#themeToggle):hover {
  transform: translateY(-1px);
  opacity: 0.9;
}

/* List items */
ul li {
  @apply my-1;
}

/* Focus states with soft lavender glow */
*:focus-visible {
  outline: 2px solid var(--accent-primary);
  outline-offset: 3px;
  border-radius: 4px;
  box-shadow: 0 0 0 4px rgba(132, 117, 181, 0.1);
}
